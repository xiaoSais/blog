<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入理解 Jsonp | Secret</title>
    <meta name="description" content="Just playing around">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.aee194d5.css" as="style"><link rel="preload" href="/assets/js/app.201bf48c.js" as="script"><link rel="preload" href="/assets/js/2.cfd58636.js" as="script"><link rel="preload" href="/assets/js/37.f8cb9cb2.js" as="script"><link rel="prefetch" href="/assets/js/10.c30585d1.js"><link rel="prefetch" href="/assets/js/11.2fb492b5.js"><link rel="prefetch" href="/assets/js/12.4ce3828a.js"><link rel="prefetch" href="/assets/js/13.b7ba9b2d.js"><link rel="prefetch" href="/assets/js/14.0bf1f2b9.js"><link rel="prefetch" href="/assets/js/15.0f64fc68.js"><link rel="prefetch" href="/assets/js/16.ed96dff6.js"><link rel="prefetch" href="/assets/js/17.ec348c71.js"><link rel="prefetch" href="/assets/js/18.db1b9aa0.js"><link rel="prefetch" href="/assets/js/19.2119ca99.js"><link rel="prefetch" href="/assets/js/20.421983e6.js"><link rel="prefetch" href="/assets/js/21.89882d03.js"><link rel="prefetch" href="/assets/js/22.4354cee5.js"><link rel="prefetch" href="/assets/js/23.e98422f5.js"><link rel="prefetch" href="/assets/js/24.64903d0f.js"><link rel="prefetch" href="/assets/js/25.6b0f62f2.js"><link rel="prefetch" href="/assets/js/26.3167e0b9.js"><link rel="prefetch" href="/assets/js/27.87fca6b4.js"><link rel="prefetch" href="/assets/js/28.9679f207.js"><link rel="prefetch" href="/assets/js/29.6922ef3d.js"><link rel="prefetch" href="/assets/js/3.b0c069e6.js"><link rel="prefetch" href="/assets/js/30.d939c463.js"><link rel="prefetch" href="/assets/js/31.f7dfaa09.js"><link rel="prefetch" href="/assets/js/32.1adb14ce.js"><link rel="prefetch" href="/assets/js/33.80fd4dc1.js"><link rel="prefetch" href="/assets/js/34.5489d530.js"><link rel="prefetch" href="/assets/js/35.0f6b6028.js"><link rel="prefetch" href="/assets/js/36.95f54780.js"><link rel="prefetch" href="/assets/js/38.2bb255cd.js"><link rel="prefetch" href="/assets/js/39.54a4d20e.js"><link rel="prefetch" href="/assets/js/4.eaa24ed2.js"><link rel="prefetch" href="/assets/js/40.fc2cbac6.js"><link rel="prefetch" href="/assets/js/41.3c407481.js"><link rel="prefetch" href="/assets/js/5.a62e1c37.js"><link rel="prefetch" href="/assets/js/6.bdef66e2.js"><link rel="prefetch" href="/assets/js/7.17c555f8.js"><link rel="prefetch" href="/assets/js/8.ffccb86b.js"><link rel="prefetch" href="/assets/js/9.7ffd6f2e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aee194d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Secret</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/document/swiper.html" class="nav-link">
  技术文档
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/document/swiper.html" class="nav-link">
  技术文档
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>技术文档</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深入axios</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Express</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>跨域</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/kuayu/tongyuan.html" class="sidebar-link">同源策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/kuayu/tongyuan.html#ajax-请求" class="sidebar-link">ajax 请求</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/tongyuan.html#dom-无法共享" class="sidebar-link">DOM 无法共享</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/tongyuan.html#cookie-无法共享" class="sidebar-link">Cookie 无法共享</a></li></ul></li><li><a href="/blog/kuayu/jsonp.html" class="active sidebar-link">深入理解 Jsonp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/kuayu/jsonp.html#同源策略" class="sidebar-link">同源策略</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/jsonp.html#jsonp-跨域" class="sidebar-link">Jsonp 跨域</a></li></ul></li><li><a href="/blog/kuayu/cors.html" class="sidebar-link">跨域资源共享（cors）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/kuayu/cors.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/cors.html#简单请求" class="sidebar-link">简单请求</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/cors.html#预检请求" class="sidebar-link">预检请求</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/cors.html#带-cookie-的预检请求" class="sidebar-link">带 cookie 的预检请求</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/cors.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/kuayu/other.html" class="sidebar-link">其他跨域策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/kuayu/other.html#共享-cookie" class="sidebar-link">共享 Cookie</a></li><li class="sidebar-sub-header"><a href="/blog/kuayu/other.html#iframe-跨域" class="sidebar-link">Iframe 跨域</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习轨迹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>散文随笔</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="深入理解-jsonp"><a href="#深入理解-jsonp" class="header-anchor">#</a> 深入理解 Jsonp</h1> <p>Jsonp 是一种跨域的手段。</p> <p>因为浏览器的同源策略，不同源脚本不能共享cookie、不能互相操作 dom ，也不能发起 ajax 请求。</p> <h2 id="同源策略"><a href="#同源策略" class="header-anchor">#</a> 同源策略</h2> <p>1、页面所在的服务1(端口3001):</p> <p>Server:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  const express = require('express')
  const app = express()
  const port = 3001
  app.use(express.static('public'))

  app.get('/data', (req, res) =&gt; res.send('Hello World!'))

  app.listen(port, () =&gt; console.log(`Example app listening on port ${port}!`))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Page:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  &lt;html&gt;
    &lt;body&gt;
      &lt;div&gt;page&lt;/div&gt;
    &lt;/body&gt;
  &lt;/html&gt;
  &lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/&gt;

  &lt;script&gt;
    axios.get('http://localhost:3000/data', {
      firstName: 'lucy',
      lastName: 'hii'
    }).then(res =&gt; {
      console.log(res.data)
    })
  &lt;/script&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>2、接口所在的服务2（端口3000）</p> <p>Server:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  const express = require('express')
  const app = express()
  const port = 3000

  app.get('/data', (req, res) =&gt; res.send('Hello World!'))

  app.listen(port, () =&gt; console.log(`Example app listening on port ${port}!`))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>3001 端口的页面试图访问 3000 端口的接口浏览器报错。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>(index):1 Access to XMLHttpRequest at 'http://localhost:3000/data' from origin 'http://localhost:3001' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="jsonp-跨域"><a href="#jsonp-跨域" class="header-anchor">#</a> Jsonp 跨域</h2> <p>Jsonp 利用了通过 scrip 标签请求 Js 文件没有同源策略限制的特性。</p> <p>我们项目中为了增加 Js 的加载速度用了各种 CDN，这些 CDN的域和项目本身所在的域大多不同，也是利用了这一特性。</p> <p>打开 www.baidu.com 首页的开发者模式：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;script src=&quot;https://dss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/js/min_super-224c7a98dc.js&quot;&gt;&lt;/script&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><b>百度首页也干了！</b></p> <h3 id="如何实现-jsonp-跨域"><a href="#如何实现-jsonp-跨域" class="header-anchor">#</a> 如何实现 Jsonp 跨域</h3> <p>你想啊，我们发起 Jsonp 请求，比如我想发请求 1，是不是要在代码里写：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  &lt;script src=&quot;https://otherDomain/1&quot;&gt;&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那我想发请求 2呢，是不是要在代码里写好：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  &lt;script src=&quot;https://otherDomain/2&quot;&gt;&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>好，那现在有个场景是在文章列表根据文章 id 去拿文章详情，这个id是动态的要怎么办呢？</p> <p>很明显不能在代码里写死了，但我们可以动态创建 script 标签啊：</p> <p>Client.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  function sendJsonpRequest(callbackName, url, params) {
    let jsonpDom = document.querySelector('#jsonp')
    if (jsonpDom) document.querySelector('body').removeChild(jsonpDom)
    const s = document.createElement('script')
    const param = qs.stringify(Object.assign({ callback: callbackName }, params))
    s.src = `${url}?${param}`
    s.id = 'jsonp'
    document.querySelector('body').appendChild(s)
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>我们的 sendJsonpRequest() 方法可以动态的传 params 并创建 script 标签，src 属性指向我们拼接的url。qs.stringify 方法主要是将 js 对象转化成 key = value 的字符串形式。为了避免发起很多请求时创建过多无效的标签，我们发请求时先把以前创建的节点清除掉。</p> <p>那我们假设成功发起请求了，我们要怎么拿到后端传的数据呢。</p> <p>我们想到在请求Js的时候，<b>Js会立刻下载并执行</b>。 那么后端只需返回携带数据的Js代码就可以了，前端会立刻执行这段代码。</p> <p>所以后端完全可以返回一个方法的调用，这个方法传参就是返回的数据，同时在客户端有该回调函数的定义。</p> <p>Client.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  // 拿到数据的回调
  function getArticleData (data) {
    console.log(data.id)
    // 执行其他业务逻辑
  }

  // 发起请求
  sendJsonpRequest('getArticleData', 'http://localhost:3000/login', {id: 2})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>同时后端可以通过 sendJsonpRequest 方法知道需要返回的函数名。</p> <p>Server</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const express = require('express')
const app = express()
const port = 3000

app.get('/login', (req, res) =&gt; { 
  res.set('Content-Type', 'text/javascript')
  console.log(req.query)
  // 根据不同的 id 返回不同的数据
  let data
  switch ( req.query.id ) {
    case '2':
      data = {name: 'lucy', age: 23, id: 2}
      break;
    case  '1':
      data = {name: 'peter', age: 34, id: 1}
      break
  }
  res.send(`${req.query.callback}(${JSON.stringify(data)})`) 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>比如上面那个例子，后端返回的是：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  getArticleData({&quot;name&quot;:&quot;peter&quot;,&quot;age&quot;:34,&quot;id&quot;:2})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>后端拿到 id 或者 callback 函数名可以执行不同的操作逻辑，最后组合成函数调用返回给前端。前端执行这段逻辑就能拿到数据啦。</p> <p>没错，JsonP 就是这么简单！</p> <h3 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h3> <p>完整的代码示例</p> <p>Client.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  &lt;html&gt;
  &lt;body&gt;
    &lt;div&gt;page&lt;/div&gt;
  &lt;/body&gt;

&lt;/html&gt;
&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  
  function getArticleData(data) {
    console.log(data.name)
  }
  const qs = {
    stringify: function (obj) {
      if (typeof obj !== 'object') throw new Error('not obj')
      else return Object.keys(obj).map(key =&gt; `${key}=${obj[key]}`).join('&amp;')
    }
  }
  function sendJsonpRequest(callbackName, url, params) {
    let jsonpDom = document.querySelector('#jsonp')
    if (jsonpDom) document.querySelector('body').removeChild(jsonpDom)
    const s = document.createElement('script')
    const param = qs.stringify(Object.assign({ callback: callbackName }, params))
    s.src = `${url}?${param}`
    s.id = 'jsonp'
    document.querySelector('body').appendChild(s)
  }
  sendJsonpRequest('getArticleData', 'http://localhost:3000/login', {id: 2})
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>Server.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
const express = require('express')
const app = express()
const port = 3000

app.get('/login', (req, res) =&gt; { 
  res.set('Content-Type', 'text/javascript')
  console.log(req.query)
  // 根据不用的callback 传递不同的数据
  let data
  switch ( req.query.id ) {
    case '1':
      data = {name: 'lucy', age: 23, id: 1}
      break;
    case  '2':
      data = {name: 'peter', age: 34, id: 2}
      break
  }
  res.send(`${req.query.callback}(${JSON.stringify(data)})`) 
})

app.listen(port, () =&gt; console.log(`Example app listening on port ${port}!`))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>1、JSONP的优点是：它不像XMLHttpRequest对象实现的Ajax请求那样受到同源策略的限制；它的兼容性更好，在更加古老的浏览器中都 可以运行，不需要XMLHttpRequest或ActiveX的支持；并且在请求完毕后可以通过调用callback的方式回传结果。</p> <p>2、JSONP的缺点则是：它只支持GET请求而不支持POST等其它类型的HTTP请求；它只支持跨域HTTP请求这种情况，不能解决不同域的两个页面之间如何进行JavaScript调用的问题。</p> <p>3、JSONP的最基本的原理是：动态添加一个标签，而script标签的src属性是没有跨域的限制的。这样说来，这种跨域方式其实与ajax XmlHttpRequest协议无关了。
jsonp的本质是：动态创建script标签，然后通过他的src属性发送跨域请求，不同意然后服务器相应的数据格式为【函数调用foo（实参）】，所以在发送请求之前必须声明一个函数，并且函数的名字与参数中传递的名字要一致。</p> <p>可以说jsonp的方式原理上和是一致的，因为他的原理实际上就是 使用js的script标签 进行传参，那么必然是get方式的了，和浏览器中敲入一个url一样</p> <p>原理就是从服务端加载一段脚本（用script标签），然后把数据放到一个函数参数里面，再然后浏览器里定义的那个函数就能拿到那个数据了~所以为啥不能发post 因为标签里只能发get，虽然， jsonp 的实现跟 ajax 没有半毛钱关系，jsonp是通过 script的src实现的，但是最终目的都是向服务器请求数据然后回调，而且为了方便，所以jquery把 jsonp 也封装在了 $.ajax 方法中，调用方式与 ajax 调用方式略有区别。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/kuayu/tongyuan.html" class="prev">
        同源策略
      </a></span> <span class="next"><a href="/blog/kuayu/cors.html">
        跨域资源共享（cors）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.201bf48c.js" defer></script><script src="/assets/js/2.cfd58636.js" defer></script><script src="/assets/js/37.f8cb9cb2.js" defer></script>
  </body>
</html>
